<link rel="import" href="../../bower_components/polymer/polymer.html">

<!--
# critter-gameboard

Renders the gameboard and its textures.

## Example
```html
<critter-gameboard level="[Array with texture code]"></critter-gameboard>
```

@demo
-->

<dom-module id="critter-gameboard-hover-field">
    <template>
        <style>
            :host {
                display: block;
            }

            #field {
                width: 40px;
                height: 40px;
                float: left;
            }

            .good:hover{
                background-color: rgba(0, 128, 0, 0.65);
            }

            .bad:hover{
                background-color: rgba(128, 0, 0, 0.65);
             }

            .defTower:hover::after {
                content: " ";
                background-image: url(./image/buildings.png);
                background-position: -52px -26px;
                width: 40px;
                height: 64px;
                display: block;
                position: relative;
                bottom: 24px;
                right: 0;
            }

            .tower:hover::after {
                content: " ";
                background-image: url(./image/buildings.png);
                background-position: -96px 0;
                width: 40px;
                height: 90px;
                display: block;
                position: relative;
                bottom: 47px;
                right: 2px;
                z-index: 3;
            }

            .spawn:hover::after{
                content: " ";
                background-image: url(./image/buildings.png);
                background-position: 0 -36px;
                width: 50px;
                height: 50px;
                display: block;
                position: relative;
                bottom: 11px;
                right: 5px;
                z-index: 3;
            }

            .mine:hover::after {
                content: " ";
                background-image: url(./image/mine.png);
                background-position: 0 0;
                width: 25px;
                height: 25px;
                display: block;
                position: relative;
                top: 7px;
                left: 7px;
            }

            .wood:hover{
                background-image: url(./image/texture.png);
                background-position: -480px -240px;
                width: 40px;
                height: 40px;
                display: block;
                position: relative;
            }

            .grass:hover {
                background-image: url(./image/texture.png);
                background-position: -42px -28px;
                background-size: 520%;
                width: 40px;
                height: 40px;
                display: block;
                position: relative;
            }

            .ice:hover {
                background-image: url(./image/texture.png);
                background-position: -125px -111px;
                background-size: 520%;
                width: 40px;
                height: 40px;
                display: block;
                position: relative;
            }

            .water:hover {
                background-image: url(./image/texture.png);
                background-position: -125px -28px;
                background-size: 520%;
                width: 40px;
                height: 40px;
                display: block;
                position: relative;
            }

            .dirt:hover {
                background-image: url(./image/texture.png);
                background-position: 0 -27px;
                background-size: 507%;
                width: 40px;
                height: 40px;
                display: block;
                position: relative;
            }
        </style>
        <div id="field" class$="[[state]] [[element]]"></div>
    </template>
    <script>
        class CritterGameboardHoverField extends Polymer.Element {
            static get is() {
                return 'critter-gameboard-hover-field';
            }

            static get properties() {

                return {
                    x: {
                        type: Number,
                        value: 0
                    },

                    y: {
                        type: Number,
                        value: 0
                    },

                    state: {
                        type: String,
                        value: 'good'
                    },

                    element:{
                        type: String
                    }
                };
            }


            connectedCallback() {
                super.connectedCallback();

                Polymer.RenderStatus.afterNextRender(this, function () {
                    this.addEventListener("mouseover", () => {
                        this.element = this.getRootNode().host.selectedElement;
                        this.dispatchEvent(new CustomEvent('hoverOver', {detail: {x: this.x, y: this.y}, bubbles: true, composed: true}));
                    });

                    this.addEventListener("click", () => {
                        if(this.state === 'good') {
                            this.dispatchEvent(new CustomEvent('fieldClicked', {detail: {x: this.x, y: this.y}, bubbles: true, composed: true}));
                        }
                    });

                });
            }
        }

        window.customElements.define(CritterGameboardHoverField.is, CritterGameboardHoverField)
    </script>
</dom-module>
